<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <title>Web IDE</title>
    <style>
        body { margin: 0; display: flex; flex-direction: column; height: 100vh; }
        #topbar {
            height: 50px;
            background: #222;
            color: white;
            display: flex;
            align-items: center;
            padding: 0 15px;
        }
        #topbar button {
            margin-right: 10px;
            padding: 8px 14px;
            font-size: 14px;
        }
        #container { flex: 1; display: flex; }
        #editorPane { width: 50%; display: flex; flex-direction: column; }
        textarea { flex: 1; width: 100%; font-family: monospace; font-size: 14px; }
        iframe { width: 50%; height: 100%; border: none; }
        #tabbar { background: #ddd; padding: 5px; display: flex; }
        .tab { margin-right: 10px; cursor: pointer; padding: 5px 10px; }
        .active { background: #aaa; }
    </style>
</head>
<body>

    <!-- ▲ 新しく追加した上部バー -->
    <div id="topbar">
        <button onclick="runCode()">Run（上の実行）</button>
    </div>

    <div id="container">
        <div id="editorPane">
            <div id="tabbar">
                <div class="tab active" onclick="switchLang('html')">HTML</div>
                <div class="tab" onclick="switchLang('css')">CSS</div>
                <div class="tab" onclick="switchLang('js')">JS</div>
            </div>

            <textarea id="htmlEditor"><h1>Hello WebIDE!</h1></textarea>
            <textarea id="cssEditor" style="display:none;">h1 { color: blue; }</textarea>
            <textarea id="jsEditor" style="display:none;">console.log("JS run!")</textarea>

            <!-- ▼ 元の下にあるRunボタン（残してOK） -->
            <button onclick="runCode()">Run</button>
        </div>

        <iframe id="preview"></iframe>
    </div>

    <script>
        let current = "html";

        function switchLang(lang) {
            document.getElementById(current + "Editor").style.display = "none";
            document.querySelector(".active").classList.remove("active");

            current = lang;
            document.getElementById(lang + "Editor").style.display = "block";
            event.target.classList.add("active");
        }

        function runCode() {
            const html = document.getElementById("htmlEditor").value;
            const css = `<style>${document.getElementById("cssEditor").value}</style>`;
            const js = `<script>${document.getElementById("jsEditor").value}<\/script>`;

            const code = html + css + js;
            const iframe = document.getElementById("preview");
            iframe.srcdoc = code;
        }
    </script>

</body>
</html>
